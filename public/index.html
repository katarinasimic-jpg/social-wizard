<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kat's Social Wizard</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
.container { max-width: 1200px; margin: 0 auto; }
.header { text-align: center; color: white; margin-bottom: 40px; }
.header h1 { font-size: 2.5em; margin-bottom: 10px; }
.header p { font-size: 1.1em; opacity: 0.9; }
.grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; margin-bottom: 30px; }
.card { background: white; border-radius: 12px; padding: 25px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15); }
.card h2 { color: #667eea; font-size: 1.3em; margin-bottom: 15px; }
textarea, input { width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-family: inherit; font-size: 0.95em; margin-bottom: 10px; }
textarea { min-height: 100px; }
input[type="text"] { min-height: 44px; }
button { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px 24px; border-radius: 8px; font-size: 1em; font-weight: 600; cursor: pointer; width: 100%; margin-bottom: 8px; }
button:hover { transform: scale(1.02); }
.button-group { display: flex; gap: 8px; }
.button-group button { flex: 1; margin-bottom: 0; }
.stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 20px; }
.stat-box { background: #f5f5f5; padding: 15px; border-radius: 8px; text-align: center; }
.stat-number { font-size: 2em; font-weight: bold; color: #667eea; }
.status-message { padding: 15px; border-radius: 8px; margin-bottom: 15px; display: none; }
.status-message.success { background: #d4edda; color: #155724; display: block; }
.status-message.error { background: #f8d7da; color: #721c24; display: block; }
.post-output { background: #f9f9f9; padding: 20px; border-radius: 8px; border-left: 4px solid #667eea; margin-top: 15px; white-space: pre-wrap; word-wrap: break-word; }
.tab-buttons { display: flex; gap: 8px; margin-bottom: 15px; }
.tab-button { padding: 8px 16px; background: #e0e0e0; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; }
.tab-button.active { background: #667eea; color: white; }
.tab-content { display: none; }
.tab-content.active { display: block; }
.slack-button { background: linear-gradient(135deg, #36C5F0 0%, #1264A3 100%); }
.slack-button:hover { transform: scale(1.02); }
</style>
</head>
<body>
<div class="container">
<div class="header">
<h1>üßô‚Äç‚ôÄÔ∏è Kat's Social Wizard</h1>
<p>Turn content into compelling posts with AI</p>
</div>
<div class="stats">
<div class="stat-box"><div class="stat-number" id="contentCount">0</div><div>Content Items</div></div>
<div class="stat-box"><div class="stat-number" id="brandCount">0</div><div>Brand Examples</div></div>
<div class="stat-box"><div class="stat-number" id="memoryCount">0</div><div>Memory Notes</div></div>
</div>
<div class="grid">
<div class="card">
<h2>üìö Add Content</h2>
<div id="contentStatus" class="status-message"></div>
<div class="tab-buttons">
<button class="tab-button active" onclick="switchTab('content', 'text')">Text</button>
<button class="tab-button" onclick="switchTab('content', 'url')">URL</button>
</div>
<div id="content-text" class="tab-content active">
<textarea id="contentInput" placeholder="Paste your content here..."></textarea>
<button onclick="addContent()">Add to Pool</button>
</div>
<div id="content-url" class="tab-content">
<input type="text" id="urlInput" placeholder="Paste a URL (blog, article, etc.)">
<button onclick="scrapeURL()">Scrape & Add</button>
</div>
</div>
<div class="card">
<h2>üéØ Brand Voice</h2>
<div id="brandStatus" class="status-message"></div>
<textarea id="brandInput" placeholder="Paste Soma's LinkedIn posts here..."></textarea>
<button onclick="addBrandVoice()">Add Brand Example</button>
<p style="color: #999; font-size: 0.85em; margin-top: 10px;">Tip: Add 3-5 of Soma's real LinkedIn posts so the AI learns his style.</p>
</div>
<div class="card">
<h2>üí≠ Memory</h2>
<div id="memoryStatus" class="status-message"></div>
<textarea id="memoryInput" placeholder="Add context (test results, positioning, etc)..."></textarea>
<button onclick="addMemory()">Save Memory</button>
</div>
<div class="card">
<h2>‚ú® Generate</h2>
<div id="generateStatus" class="status-message"></div>
<button onclick="generatePost()">Generate LinkedIn Post</button>
<div id="postOutput"></div>
<div class="button-group" id="postButtons" style="display: none; margin-top: 15px;">
<button onclick="copyPost()">üìã Copy Post</button>
<button class="slack-button" onclick="postToSlack()">üí¨ Post to Slack</button>
</div>
</div>
</div>
</div>
<script>
const API_BASE = "/api";
let lastGeneratedPost = "";

function switchTab(section, tab) {
  document.querySelectorAll(`#${section} .tab-content`).forEach(el => el.classList.remove('active'));
  document.querySelectorAll(`#${section} .tab-button`).forEach(el => el.classList.remove('active'));
  document.getElementById(`${section}-${tab}`).classList.add('active');
  document.querySelector(`[onclick="switchTab('${section}', '${tab}')"]`).classList.add('active');
}

function showStatus(id, msg, type) { const el = document.getElementById(id); el.textContent = msg; el.className = `status-message ${type}`; setTimeout(() => { el.className = "status-message"; }, 5000); }

async function loadStats() { try { const [c, b, m] = await Promise.all([fetch(`${API_BASE}/content/list`).then(r => r.json()), fetch(`${API_BASE}/brand/list`).then(r => r.json()), fetch(`${API_BASE}/memory/list`).then(r => r.json())]); document.getElementById("contentCount").textContent = c.total; document.getElementById("brandCount").textContent = b.total; document.getElementById("memoryCount").textContent = m.total; } catch(e) { console.error(e); } }

async function addContent() { const content = document.getElementById("contentInput").value.trim(); if (!content) { showStatus("contentStatus", "Enter content", "error"); return; } try { const r = await fetch(`${API_BASE}/content/add`, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ type: "content", content }) }); if (r.ok) { showStatus("contentStatus", "‚úÖ Added!", "success"); document.getElementById("contentInput").value = ""; loadStats(); } } catch(e) { showStatus("contentStatus", "Error", "error"); } }

async function scrapeURL() { const url = document.getElementById("urlInput").value.trim(); if (!url) { showStatus("contentStatus", "Enter a URL", "error"); return; } try { showStatus("contentStatus", "Scraping...", "success"); const r = await fetch(`${API_BASE}/content/scrape-url`, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ url }) }); const data = await r.json(); if (r.ok) { showStatus("contentStatus", `‚úÖ Scraped & added!`, "success"); document.getElementById("urlInput").value = ""; loadStats(); } else { showStatus("contentStatus", data.error || "Error scraping", "error"); } } catch(e) { showStatus("contentStatus", "Error scraping URL", "error"); } }

async function addBrandVoice() { const post = document.getElementById("brandInput").value.trim(); if (!post) { showStatus("brandStatus", "Paste a post", "error"); return; } try { const r = await fetch(`${API_BASE}/brand/add`, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ post }) }); if (r.ok) { showStatus("brandStatus", "‚úÖ Added!", "success"); document.getElementById("brandInput").value = ""; loadStats(); } } catch(e) { showStatus("brandStatus", "Error", "error"); } }

async function addMemory() { const note = document.getElementById("memoryInput").value.trim(); if (!note) { showStatus("memoryStatus", "Enter memory", "error"); return; } try { const r = await fetch(`${API_BASE}/memory/add`, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ note }) }); showStatus("memoryStatus", "‚úÖ Saved!", "success"); document.getElementById("memoryInput").value = ""; loadStats(); } catch(e) { showStatus("memoryStatus", "Error", "error"); } }

async function generatePost() { const out = document.getElementById("postOutput"); try { const r = await fetch(`${API_BASE}/generate/post`, { method: "POST", headers: { "Content-Type": "application/json" } }); const data = await r.json(); if (r.ok) { lastGeneratedPost = data.post; out.innerHTML = `<div class="post-output">${data.post}</div>`; document.getElementById("postButtons").style.display = "flex"; showStatus("generateStatus", "‚úÖ Generated!", "success"); } else { showStatus("generateStatus", data.error || "Error", "error"); } } catch(e) { showStatus("generateStatus", "Error", "error"); } }

function copyPost() { if (!lastGeneratedPost) { alert("No post to copy!"); return; } navigator.clipboard.writeText(lastGeneratedPost).then(() => { showStatus("generateStatus", "‚úÖ Copied to clipboard!", "success"); }).catch(() => { alert("Failed to copy"); }); }

async function postToSlack() { if (!lastGeneratedPost) { alert("No post to share!"); return; } try { showStatus("generateStatus", "üì§ Posting to Slack...", "success"); const r = await fetch(`${API_BASE}/slack/post`, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ text: lastGeneratedPost }) }); const data = await r.json(); if (r.ok) { showStatus("generateStatus", "‚úÖ Posted to Slack!", "success"); } else { showStatus("generateStatus", data.error || "Error posting", "error"); } } catch(e) { showStatus("generateStatus", "Error posting to Slack", "error"); } }

loadStats();
setInterval(loadStats, 10000);
</script>
</body>
</html>
